<main id="graphBasic" ng-controller="graphuiPlugin" aria-labelledby="graphHeading">
  <!-- Local nav. -->
  <kbn-top-nav name="workspacesTopNav" config="topNavMenu" set-menu-mount-point="setHeaderActionMenu">
  </kbn-top-nav>

  <div class="gphGraph__menus" ng-show="menus.showInspect">
    <div>
      <div
        class="kuiLocalDropdownTitle"
        i18n-id="xpack.graph.inspect.title"
        i18n-default-message="Inspect"
      ></div>

      <div
        class="list-group-item"
        ng-if="(workspace !== null)"
      >
        <small class="help-block">http://host:port/{{ selectedIndex.name }}/_graph/explore</small>
        <ul class="nav nav-tabs">
          <li ng-class="{active: spymode === 'request'}">
            <a
              ng-click="spymode='request'"
              i18n-id="xpack.graph.inspect.requestTabTitle"
              i18n-default-message="Request"
            ></a>
          </li>
          <li ng-class="{active: spymode === 'response'}">
            <a
              ng-click="spymode='response'"
              i18n-id="xpack.graph.inspect.responseTabTitle"
              i18n-default-message="Response"
            ></a>
          </li>
        </ul>

        <div
          ng-show="spymode == 'request'"
          ui-ace="{ onLoad: aceLoaded, mode: 'json', advanced: { readOnly: true } }"
          ng-model="workspace.lastRequest"
          class="gphSettings__jsonView"
        ></div>
        <div
          ng-show="spymode == 'response'"
          ui-ace="{ onLoad: aceLoaded, mode: 'json', advanced: { readOnly: true } }"
          ng-model="workspace.lastResponse"
          class="gphSettings__jsonView"
        ></div>
      </div>
    </div>
  </div>

  <div
    graph-app
    current-index-pattern="selectedIndex"
    on-query-submit="submit"
    index-pattern-provider="indexPatternProvider"
    redux-store="reduxStore"
    confirm-wipe-workspace="confirmWipeWorkspace"
    is-loading="loading"
    is-initialized="workspaceInitialized || savedWorkspace.id"
    initial-query="initialQuery"
    plugin-data-start="pluginDataStart"
    core-start="coreStart"
    storage="storage"
    no-index-patterns="noIndexPatterns"
  ></div>

  <div class="gphGraph__container" id="GraphSvgContainer" ng-if="workspaceInitialized || savedWorkspace.id">
    <div
      class="gphVisualization"
      graph-visualization
      nodes="workspace.nodes"
      edges="workspace.edges"
      edge-click="clickEdge"
      node-click="nodeClick"
    ></div>
   
    <control-panel 
      workspace="workspace" 
      live-response-fields="liveResponseFields" 
      set-detail="setDetail"
      is-selected-selected="isSelectedSelected"
      is-color-dark="isColorDark"
      url-templates="urlTemplates"
      open-url-template="openUrlTemplate"
      detail="detail"
      colors="colors"
      perform-merge="performMerge"
      select-selected="selectSelected"
    ></control-panel>
  </div>
  <!--end svg container-->

</main>
